def get_elements_at_uniform_distance(input_list, num_elements):
    # Обчислюємо крок
    step = (len(input_list) - 1) / (num_elements - 1)
    # Створюємо список індексів
    indices = [round(i * step) for i in range(num_elements)]
    # Витягуємо елементи за обраними індексами
    selected_elements = [input_list[i] for i in indices]
    return selected_elements


def split_list_into_sectors(input_list, num_sectors):
    # Знаходимо кількість елементів в кожному секторі
    sector_length = len(input_list) // num_sectors
    # Розділяємо вихідний список на сектори
    sectors = [input_list[i:i + sector_length] for i in range(0, len(input_list), sector_length)]
    # Створюємо словник для зберігання середнього значення кольору кожного сектору разом з сектором
    sectors_with_average_color = {}
    for i, sector in enumerate(sectors):
        # Знаходимо середнє значення кожного кольору у секторі
        average_color = tuple(int(sum(color) / len(color)) for color in zip(*sector))
        # Зберігаємо середнє значення кольору та сектор у словнику
        sectors_with_average_color[average_color] = sector
    return sectors_with_average_color


def divide_colors(colors, percentages):
    result = {}
    # total_sum = sum(percentages)
    color_index = 0
    start_percentage = 0

    for percentage in percentages:
        end_percentage = start_percentage + percentage
        color_section = colors[color_index:int(len(colors) * end_percentage / 100)]
        middle_color_index = int(len(color_section) / 2)
        middle_color = color_section[middle_color_index]
        result[middle_color] = color_section

        start_percentage = end_percentage
        color_index = int(len(colors) * start_percentage / 100)

    return result

from PIL import Image

def replace_colors(image, color_map):
    layers = {}
    bright_green = (0, 255, 0)  # Яскраво-зелений колір
    unique_green_used = False

    # Проходження через усі пікселі зображення
    width, height = image.size
    for x in range(width):
        for y in range(height):
            # Отримання кольору пікселя
            pixel_color = image.getpixel((x, y))
            # Перевірка, чи є цей кольор в одному з діапазонів
            for color, color_range in color_map.items():
                if pixel_color in color_range:
                    # Створення шару для кожного кольору, якщо він ще не створений
                    if color not in layers:
                        layers[color] = Image.new('RGB', (width, height), (255, 255, 255))
                    # Заміна кольору пікселя на відповідний кольор з мапи у відповідному шарі
                    layers[color].putpixel((x, y), pixel_color)
                    # Перевірка, чи вже використовується унікальний зелений колір
                    if pixel_color == bright_green and not unique_green_used:
                        layers['bright_green'] = Image.new('RGB', (width, height), (255, 255, 255))
                        layers['bright_green'].putpixel((x, y), bright_green)
                        unique_green_used = True
                    break  # Зупинка перевірки, якщо знайдено відповідний кольор

    # Зберігаємо кожен шар у файл формату EPS
    for color, layer_image in layers.items():
        layer_output_path = f"{color}_layer.eps"
        layer_image.save(layer_output_path, format="EPS")
        print(f"Шар \"{color}\" збережено у файл {layer_output_path}")

# Приклад використання методу
input_image_path = "input_image.png"  # Шлях до вхідного файлу зображення
with Image.open(input_image_path) as img:
    color_map = {  # Ваші діапазони кольорів тут
        'red': [(255, 0, 0)],
        'green': [(0, 255, 0)],
        'blue': [(0, 0, 255)]
    }
    replace_colors(img, color_map)


percentages = [10, 10, 10, 10, 10, 10, 10, 10, 20]

# Приклад використання:
rgb_list = [(3, 3, 0), (3, 3, 2), (3, 3, 3), (6, 6, 4), (6, 6, 5), (6, 6, 6), (8, 8, 7), (8, 8, 8), (11, 9, 9),
            (11, 11, 9), (11, 11, 10), (11, 11, 11), (13, 12, 12), (13, 13, 13), (13, 13, 12), (16, 16, 16),
            (16, 16, 15), (16, 15, 15), (18, 18, 17), (18, 17, 17), (18, 18, 18), (21, 20, 20), (21, 21, 21),
            (21, 21, 20), (23, 23, 23), (23, 23, 22), (23, 22, 22), (26, 26, 26), (26, 26, 25), (26, 25, 25),
            (29, 27, 27), (29, 29, 29), (29, 29, 27), (31, 31, 30), (31, 31, 31), (31, 30, 30), (34, 34, 32),
            (34, 34, 34), (34, 32, 32), (36, 36, 36), (36, 36, 35), (36, 35, 35), (39, 39, 39), (39, 39, 38),
            (39, 38, 38), (41, 40, 40), (41, 41, 41), (41, 41, 40), (44, 44, 44), (44, 43, 43), (44, 44, 43),
            (46, 45, 45), (46, 46, 45), (46, 46, 46), (49, 47, 47), (49, 49, 49), (49, 49, 47), (51, 51, 51),
            (51, 51, 50), (51, 50, 50), (54, 53, 53), (54, 54, 54), (54, 54, 53), (57, 55, 55), (57, 57, 57),
            (57, 57, 55), (59, 58, 58), (59, 59, 58), (59, 59, 59), (62, 60, 60), (62, 62, 60), (62, 62, 62),
            (64, 64, 63), (64, 64, 64), (64, 63, 63), (67, 67, 65), (67, 65, 65), (67, 67, 67), (69, 69, 69),
            (69, 69, 68), (69, 68, 68), (72, 72, 72), (72, 70, 70), (72, 72, 70), (74, 73, 73), (74, 74, 73),
            (74, 74, 74), (77, 77, 77), (77, 77, 75), (77, 75, 75), (80, 80, 78), (80, 80, 80), (80, 78, 78),
            (82, 80, 80), (82, 82, 82), (82, 82, 80), (85, 85, 85), (85, 83, 83), (85, 85, 83), (87, 85, 85),
            (87, 87, 85), (87, 87, 87), (90, 90, 88), (90, 90, 90), (90, 88, 88), (92, 92, 90), (92, 92, 92),
            (92, 90, 90), (95, 93, 93), (95, 95, 93), (95, 95, 95), (97, 97, 97), (97, 95, 95), (97, 97, 95),
            (100, 100, 100), (100, 100, 98), (100, 98, 98), (102, 102, 102), (102, 102, 101), (102, 101, 101),
            (105, 105, 105), (105, 104, 104), (105, 105, 104), (108, 108, 107), (108, 107, 107), (108, 108, 108),
            (110, 110, 110), (110, 110, 109), (110, 109, 109), (113, 112, 112), (113, 113, 112), (113, 113, 113),
            (115, 114, 114), (115, 115, 114), (115, 115, 115), (118, 118, 118), (118, 117, 117), (118, 118, 117),
            (120, 120, 119), (120, 120, 120), (120, 119, 119), (123, 123, 123), (123, 122, 122), (123, 123, 122),
            (125, 125, 124), (125, 124, 124), (125, 125, 125), (128, 128, 127), (128, 127, 127), (128, 128, 128),
            (131, 131, 131), (131, 131, 129), (131, 129, 129), (133, 133, 132), (133, 133, 133), (133, 132, 132),
            (136, 136, 136), (136, 136, 134), (136, 134, 134), (138, 138, 138), (138, 137, 137), (138, 138, 137),
            (141, 139, 139), (141, 141, 139), (141, 141, 141), (143, 143, 143), (143, 143, 142), (143, 142, 142),
            (146, 146, 144), (146, 144, 144), (146, 146, 146), (148, 148, 148), (148, 147, 147), (148, 148, 147),
            (151, 149, 149), (151, 151, 151), (151, 151, 149), (153, 153, 153), (153, 153, 152), (153, 152, 152),
            (156, 156, 156), (156, 156, 154), (156, 154, 154), (159, 159, 159), (159, 157, 157), (159, 159, 157),
            (161, 161, 160), (161, 161, 161), (164, 164, 164), (164, 164, 162), (164, 162, 162), (166, 166, 165),
            (166, 166, 166), (166, 165, 165), (169, 169, 167), (169, 169, 169), (169, 167, 167), (171, 171, 171),
            (171, 170, 170), (171, 171, 170), (174, 174, 172), (174, 172, 172), (174, 174, 174), (176, 176, 175),
            (176, 176, 176), (176, 175, 175), (179, 179, 177), (179, 177, 177), (179, 179, 179), (182, 180, 180),
            (182, 182, 180), (182, 182, 182), (184, 184, 182), (184, 184, 184), (184, 182, 182), (187, 187, 187),
            (187, 185, 185), (187, 187, 185), (189, 189, 187), (189, 189, 189), (189, 187, 187), (192, 192, 192),
            (192, 192, 190), (192, 190, 190), (194, 194, 194), (194, 194, 192), (194, 192, 192), (197, 197, 197),
            (197, 195, 195), (197, 197, 195), (199, 197, 197), (199, 199, 197), (199, 199, 199), (202, 202, 200),
            (202, 200, 200), (202, 202, 202), (204, 204, 202), (204, 204, 204), (204, 202, 202), (207, 207, 205),
            (207, 205, 205), (207, 207, 207), (210, 210, 208), (210, 210, 210), (212, 212, 210), (212, 212, 212),
            (215, 215, 215), (215, 215, 213), (217, 217, 215), (217, 217, 217), (220, 220, 218), (220, 220, 220),
            (222, 222, 220), (222, 222, 222), (225, 223, 223), (225, 225, 225), (225, 225, 223), (227, 227, 225),
            (227, 227, 227), (227, 225, 225), (230, 230, 228), (230, 228, 228), (230, 230, 230), (233, 233, 230),
            (233, 233, 233), (233, 230, 230), (235, 235, 235), (235, 235, 233), (238, 235, 235), (238, 238, 235),
            (238, 238, 238), (240, 240, 238), (240, 240, 240), (240, 238, 238), (243, 243, 240), (243, 240, 240),
            (243, 243, 243), (245, 245, 245), (245, 245, 243), (248, 248, 245), (248, 248, 248), (250, 250, 250),
            (250, 250, 248), (253, 253, 250), (253, 253, 253), (255, 255, 253), (255, 255, 255), (255, 253, 253)]
num_sectors = 9
result = divide_colors(rgb_list, percentages)
# print(result)
print("Sectors with average color:")
for color, sector in result.items():
    print("Average color:", color, "- Number: ", len(sector), "- Sector:", sector)

# # Приклад використання
# input_list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
# num_elements = 4
# result = get_elements_at_uniform_distance(input_list, num_elements)
# print(result)
